package machine;

        import java.util.Locale;
        import java.util.Scanner;

public class CoffeeMachine {

    public static Scanner scanner = new Scanner(System.in);

    public int water, milk, coffeeBeans, cups, money;

    public static String inputUser;

    public static CoffeeMachine selectedTypeCoffee = new CoffeeMachine();
    public static CoffeeMachine machine = new CoffeeMachine(400, 540, 120, 9, 550);
    public static CoffeeMachine espressoRequired = new CoffeeMachine(250, 0, 16, 1, 4);
    public static CoffeeMachine latteRequired = new CoffeeMachine(350, 75, 20, 1, 7);
    public static CoffeeMachine cappuccinoRequired = new CoffeeMachine(200, 100, 12, 1, 6);

    CoffeeMachine(int water, int milk, int coffeeBeans, int cups, int money) {
        this.water = water;
        this.milk = milk;
        this.coffeeBeans = coffeeBeans;
        this.cups = cups;
        this.money = money;
    }//constructor of class
    CoffeeMachine() {
    }

    public static CoffeeMachine handledChoiceCoffee() {
        String inputUser = scanner.next();
            switch (inputUser) {
                case "1": {
                    selectedTypeCoffee = espressoRequired;
                    break;
                }
                case "2": {
                    selectedTypeCoffee = latteRequired;
                    break;
                }
                case "3": {
                    selectedTypeCoffee = cappuccinoRequired;
                    break;
                }
                case "back": {
                    break;
                }
            }
        return selectedTypeCoffee;
    }

    public static void makeCoffee(CoffeeMachine selectedTypeCoffee) {
        if(CoffeeMachine.machine.water < selectedTypeCoffee.water ) {
            System.out.println("Sorry, not enough water!\n");
        } else if (CoffeeMachine.machine.coffeeBeans < selectedTypeCoffee.coffeeBeans) {
            System.out.println("Sorry, not enough coffee beans!\n");
        } else if (CoffeeMachine.machine.milk < selectedTypeCoffee.milk) {
            System.out.println("Sorry, not enough milk!\n");
        } else if (CoffeeMachine.machine.cups == 0) {
            System.out.println("Sorry, not enough cups!\n");
        } else {
            System.out.println("I have enough resources, making you a coffee!\n");
            CoffeeMachine.machine.water -= selectedTypeCoffee.water;
            CoffeeMachine.machine.milk -= selectedTypeCoffee.milk;
            CoffeeMachine.machine.coffeeBeans -= selectedTypeCoffee.coffeeBeans;
            CoffeeMachine.machine.money += selectedTypeCoffee.money;
            CoffeeMachine.machine.cups -= selectedTypeCoffee.cups;
        }
    }

    public static void fillCoffeeMachineSupplies() {
        System.out.println("\nWrite how many ml of water you want to add:");
        int inputUser = scanner.nextInt();
        machine.water += inputUser;
        System.out.println("\nWrite how many ml of milk you want to add:");
        inputUser = scanner.nextInt();
        machine.milk += inputUser;
        System.out.println("\nWrite how many grams of coffee beans you want to add");
        inputUser = scanner.nextInt();
        machine.coffeeBeans += inputUser;
        System.out.println("\nWrite how many disposable cups of coffee you want to add:");
        inputUser = scanner.nextInt();
        machine.cups += inputUser;
    }

    public static void takeOfMoney() {
        System.out.println("\nI gave you $" + machine.money + "\n");
        machine.money -= machine.money;
    }

    public static void getRemainingIngredients() {
        System.out.println("\nThe coffee machine has:");
        System.out.println(machine.water + " ml of water");
        System.out.println(machine.milk + " ml of milk");
        System.out.println(machine.coffeeBeans + " g of coffee beans");
        System.out.println(machine.cups + " disposable cups");
        System.out.println("$" + machine.money + " of money\n");
    }

    public static String displayMainMenu() {
        return "Write action (buy, fill, take, remaining, exit):";
    }

    public static String displayChoiceCoffeeMenu() {
        return "\nWhat do you want to buy? 1 - espresso, 2 - latte, 3 - cappuccino, back - to main menu:";
    }

    public static void statusCoffeeMachine() {
        System.out.println(displayMainMenu());
        inputUser = scanner.next().toUpperCase(Locale.ROOT);
        switch (inputUser) {
            case "BUY" : {
                System.out.println(displayChoiceCoffeeMenu());
                if (inputUser.equals("BACK")) {
                    statusCoffeeMachine();
                } else {
                    makeCoffee(handledChoiceCoffee());
                }
                break;
            }
            case "FILL" : {
                fillCoffeeMachineSupplies();
                break;
            }
            case "TAKE" : {
                takeOfMoney();
                break;
            }
            case "REMAINING" : {
                getRemainingIngredients();
                break;
            }
        }
    }

    public static void main(String[] args) {
        do {
            statusCoffeeMachine();
        } while (!inputUser.equals("EXIT"));
    }

}
